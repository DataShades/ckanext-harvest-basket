{% ckan_extends %}

{% block extra_config %}
    {% set config_placeholder = '{
        "tsm_schema":{
            "root":"Dataset",
            "types":{
                "Dataset":{
                    "fields":{
                        "data_lang": {
                            "value": "English"
                        }
                    }
                }
            }
        }
    }'
    %}

    {{ form.textarea('config', id='field-config', label=_('Configuration'), value=data.config, error=errors.config, placeholder=config_placeholder) }}

    <div class="harvest-checkup-preview" data-module="harvest-change-source-type harvest-config">
        <div class="form-group control-full">
            <label class="control-label" for="field-checkup-preview">
                {{ _('Source checkup preview')}}
            </label>
            <div class="controls">
                <textarea
                    disabled
                    id="field-checkup-preview"
                    name="checkup-preview"
                    cols="20" rows="10"
                    placeholder=""
                    class="form-control preview-field"
                ></textarea>
            </div>
            <p class="action-info small">
                {% trans %}
                The preview shows you the data before we are going to apply our custom scheme to it.
                Provide a <b>source URL</b> and choose a <b>source type</b> to check it up.
                {% endtrans %}
            </p>
        </div>
    </div>
{% endblock extra_config %}

